{"ast":null,"code":"// import { Component } from '@angular/core';\n// import { ImageScannerApiService } from './image-scanner-api.service';\n// import { NgxImageCompressService } from 'ngx-image-compress';//to compress image,library from angular\n// @Component({\n//   selector: 'app-root',\n//   templateUrl: './app.component.html'\n// })\n// export class AppComponent {\n//   title = 'app';\n//   selectedImage: File | null = null;\n//   constructor(\n//     private imgScannerApi: ImageScannerApiService,\n//     private imageCompress: NgxImageCompressService\n//   ) {}\n//   onFileSelected(event: any) {\n//     const files = event.target.files;\n//     this.selectedImage = files && files.length > 0 ? files[0] : null;\n//      // Log the original size of the image in KB\n//     if (this.selectedImage) {\n//       const originalSizeInBytes = this.selectedImage.size;\n//       const originalSizeInKB = originalSizeInBytes / 1024;\n//       console.log('Original Image Size:', originalSizeInKB.toFixed(2), 'KB');\n//     }\n//     // call here,if you want to compress the image here before uploading\n//     this.compressImage();\n//   }\n//   //function to compress image\n//   compressImage(): void {\n//     if (this.selectedImage) {\n//       const reader = new FileReader();\n//       reader.onload = () => {\n//         const base64String = reader.result as string;\n//         this.imageCompress\n//           .compressFile(base64String, -1, 60, 60)\n//           .then((compressedBase64: string) => {\n//             //below 4 lines code only to check size of img after compress\n//             const compressedSizeInBytes = compressedBase64.length;\n//             const compressedSizeInKB = compressedSizeInBytes / 1024;\n//             console.log('Compressed Image Size:', compressedSizeInKB.toFixed(2), 'KB');\n//             console.log('Compressed Image:', compressedBase64);\n//           })\n//           .catch((error) => {\n//             console.error('Image Compression Error:', error);\n//           });\n//       };\n//       reader.readAsDataURL(this.selectedImage);\n//     }\n//   }\n//   onUpload(): void {\n//     if (this.selectedImage) {\n//       const reader = new FileReader();\n//       reader.onloadend = () => {\n//         const imageBytes = reader.result as ArrayBuffer;\n//         this.imgScannerApi.sendData(imageBytes).subscribe({\n//           next: (response) =>{\n//             console.log('API Response:', response);\n//           },\n//          error : (error) => {\n//             console.error('API Error:', error);\n//           },\n//         });\n//       };\n//       reader.readAsArrayBuffer(this.selectedImage);\n//     }\n//   }\n// }\n//////////////////////////////////////////////////\n//this code is for 1st-select img,then compressed it,then upload or send it to service for http post.\n// Import necessary modules and services\n// Import necessary modules and services\n// import { Component } from '@angular/core';\n// import { ImageScannerApiService } from './image-scanner-api.service';\n// import { NgxImageCompressService } from 'ngx-image-compress';\n// @Component({\n//   selector: 'app-root',\n//   templateUrl: './app.component.html'\n// })\n// export class AppComponent {\n//   title = 'app';\n//   selectedImage: File | null = null;\n//   constructor(\n//     private imgScannerApi: ImageScannerApiService,\n//     private imageCompress: NgxImageCompressService\n//   ) {}\n//   onFileSelected(event: any) {\n//     const files = event.target.files;\n//     this.selectedImage = files && files.length > 0 ? files[0] : null;\n//     if (this.selectedImage) {\n//       const originalSizeInBytes = this.selectedImage.size;\n//       const originalSizeInKB = originalSizeInBytes / 1024;\n//       console.log('Original Image Size:', originalSizeInKB.toFixed(2), 'KB');\n//       this.compressAndUpload();\n//     }\n//   }\n//   compressAndUpload(): void {\n//     if (this.selectedImage) {\n//       const reader = new FileReader();\n//       reader.onload = () => {\n//         const base64String = reader.result as string;\n//         this.imageCompress\n//           .compressFile(base64String, -1, 60, 60)\n//           .then((compressedBase64: string) => {\n//             // Now you can use compressedBase64 as a base64 string\n//             const compressedSizeInBytes = compressedBase64.length;\n//            // console.log('Compressed Image Size:', compressedSizeInBytes);\n//             const compressedSizeInKB = compressedSizeInBytes / 1024;\n//             console.log('Compressed Image Size:', compressedSizeInKB.toFixed(2), 'KB');\n//             // Call your API service here to send the compressed image\n//             this.imgScannerApi.sendData(compressedBase64.split(',')[1]).subscribe({\n//               next: (response) => {\n//                 console.log('API Response:', response);\n//               },\n//               error: (error) => {\n//                 console.error('API Error:', error);\n//               },\n//             });\n//           })\n//           .catch((error) => {\n//             console.error('Image Compression Error:', error);\n//           });\n//       };\n//       reader.readAsDataURL(this.selectedImage);\n//     }\n//   }\n// }\n///////////////////////////////\n// ... (your imports and component decorator)\nexport class AppComponent {\n  constructor() {\n    // ... (your existing code)\n    // Define a class variable to store the compressedBase64 string\n    this.compressedBase64 = null;\n  }\n  onFileSelected(event) {\n    const files = event.target.files;\n    this.selectedImage = files && files.length > 0 ? files[0] : null;\n    if (this.selectedImage) {\n      const originalSizeInBytes = this.selectedImage.size;\n      const originalSizeInKB = originalSizeInBytes / 1024;\n      console.log('Original Image Size:', originalSizeInKB.toFixed(2), 'KB');\n    }\n  }\n  compressAndUpload() {\n    if (this.selectedImage) {\n      const reader = new FileReader();\n      reader.onload = () => {\n        const base64String = reader.result;\n        this.imageCompress.compressFile(base64String, -1, 60, 60).then(compressedBase64 => {\n          const compressedSizeInBytes = compressedBase64.length;\n          const compressedSizeInKB = compressedSizeInBytes / 1024;\n          console.log('Compressed Image Size:', compressedSizeInKB.toFixed(2), 'KB');\n          // Assign the compressedBase64 to a class variable\n          this.compressedBase64 = compressedBase64;\n        }).catch(error => {\n          console.error('Image Compression Error:', error);\n        });\n      };\n      reader.readAsDataURL(this.selectedImage);\n    }\n  }\n  // Add a new method to handle the button click\n  onClickUpload() {\n    // Now, you can use this.compressedBase64 to send the data to the API\n    if (this.compressedBase64) {\n      this.imgScannerApi.sendData(this.compressedBase64.split(',')[1]).subscribe({\n        next: response => {\n          console.log('API Response:', response);\n        },\n        error: error => {\n          console.error('API Error:', error);\n        }\n      });\n    }\n  }\n}","map":{"version":3,"mappings":"AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA,OAAM,MAAOA,YAAY;EAAzBC;IACE;IAmDA;IACA,qBAAgB,GAAkB,IAAI;EACxC;EAnDEC,cAAc,CAACC,KAAU;IACvB,MAAMC,KAAK,GAAGD,KAAK,CAACE,MAAM,CAACD,KAAK;IAChC,IAAI,CAACE,aAAa,GAAGF,KAAK,IAAIA,KAAK,CAACG,MAAM,GAAG,CAAC,GAAGH,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI;IAEhE,IAAI,IAAI,CAACE,aAAa,EAAE;MACtB,MAAME,mBAAmB,GAAG,IAAI,CAACF,aAAa,CAACG,IAAI;MACnD,MAAMC,gBAAgB,GAAGF,mBAAmB,GAAG,IAAI;MACnDG,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEF,gBAAgB,CAACG,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC;;EAE1E;EAEAC,iBAAiB;IACf,IAAI,IAAI,CAACR,aAAa,EAAE;MACtB,MAAMS,MAAM,GAAG,IAAIC,UAAU,EAAE;MAC/BD,MAAM,CAACE,MAAM,GAAG,MAAK;QACnB,MAAMC,YAAY,GAAGH,MAAM,CAACI,MAAgB;QAC5C,IAAI,CAACC,aAAa,CACfC,YAAY,CAACH,YAAY,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CACtCI,IAAI,CAAEC,gBAAwB,IAAI;UACjC,MAAMC,qBAAqB,GAAGD,gBAAgB,CAAChB,MAAM;UACrD,MAAMkB,kBAAkB,GAAGD,qBAAqB,GAAG,IAAI;UACvDb,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEa,kBAAkB,CAACZ,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC;UAE1E;UACA,IAAI,CAACU,gBAAgB,GAAGA,gBAAgB;QAC1C,CAAC,CAAC,CACDG,KAAK,CAAEC,KAAK,IAAI;UACfhB,OAAO,CAACgB,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAClD,CAAC,CAAC;MACN,CAAC;MACDZ,MAAM,CAACa,aAAa,CAAC,IAAI,CAACtB,aAAa,CAAC;;EAE5C;EAEA;EACAuB,aAAa;IACX;IACA,IAAI,IAAI,CAACN,gBAAgB,EAAE;MACzB,IAAI,CAACO,aAAa,CAACC,QAAQ,CAAC,IAAI,CAACR,gBAAgB,CAACS,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,SAAS,CAAC;QACzEC,IAAI,EAAGC,QAAQ,IAAI;UACjBxB,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEuB,QAAQ,CAAC;QACxC,CAAC;QACDR,KAAK,EAAGA,KAAK,IAAI;UACfhB,OAAO,CAACgB,KAAK,CAAC,YAAY,EAAEA,KAAK,CAAC;QACpC;OACD,CAAC;;EAEN","names":["AppComponent","constructor","onFileSelected","event","files","target","selectedImage","length","originalSizeInBytes","size","originalSizeInKB","console","log","toFixed","compressAndUpload","reader","FileReader","onload","base64String","result","imageCompress","compressFile","then","compressedBase64","compressedSizeInBytes","compressedSizeInKB","catch","error","readAsDataURL","onClickUpload","imgScannerApi","sendData","split","subscribe","next","response"],"sourceRoot":"","sources":["D:\\project angular\\smartPaperScanner\\ClientApp\\src\\app\\app.component.ts"],"sourcesContent":["// import { Component } from '@angular/core';\r\n// import { ImageScannerApiService } from './image-scanner-api.service';\r\n// import { NgxImageCompressService } from 'ngx-image-compress';//to compress image,library from angular\r\n\r\n// @Component({\r\n//   selector: 'app-root',\r\n//   templateUrl: './app.component.html'\r\n// })\r\n// export class AppComponent {\r\n//   title = 'app';\r\n//   selectedImage: File | null = null;\r\n\r\n//   constructor(\r\n//     private imgScannerApi: ImageScannerApiService,\r\n//     private imageCompress: NgxImageCompressService\r\n//   ) {}\r\n\r\n//   onFileSelected(event: any) {\r\n//     const files = event.target.files;\r\n//     this.selectedImage = files && files.length > 0 ? files[0] : null;\r\n\r\n//      // Log the original size of the image in KB\r\n//     if (this.selectedImage) {\r\n//       const originalSizeInBytes = this.selectedImage.size;\r\n//       const originalSizeInKB = originalSizeInBytes / 1024;\r\n//       console.log('Original Image Size:', originalSizeInKB.toFixed(2), 'KB');\r\n//     }\r\n//     // call here,if you want to compress the image here before uploading\r\n//     this.compressImage();\r\n//   }\r\n\r\n//   //function to compress image\r\n//   compressImage(): void {\r\n//     if (this.selectedImage) {\r\n//       const reader = new FileReader();\r\n//       reader.onload = () => {\r\n//         const base64String = reader.result as string;\r\n//         this.imageCompress\r\n//           .compressFile(base64String, -1, 60, 60)\r\n//           .then((compressedBase64: string) => {\r\n//             //below 4 lines code only to check size of img after compress\r\n//             const compressedSizeInBytes = compressedBase64.length;\r\n//             const compressedSizeInKB = compressedSizeInBytes / 1024;\r\n//             console.log('Compressed Image Size:', compressedSizeInKB.toFixed(2), 'KB');\r\n//             console.log('Compressed Image:', compressedBase64);\r\n//           })\r\n//           .catch((error) => {\r\n//             console.error('Image Compression Error:', error);\r\n//           });\r\n//       };\r\n//       reader.readAsDataURL(this.selectedImage);\r\n//     }\r\n//   }\r\n\r\n//   onUpload(): void {\r\n//     if (this.selectedImage) {\r\n//       const reader = new FileReader();\r\n//       reader.onloadend = () => {\r\n//         const imageBytes = reader.result as ArrayBuffer;\r\n//         this.imgScannerApi.sendData(imageBytes).subscribe({\r\n//           next: (response) =>{\r\n//             console.log('API Response:', response);\r\n//           },\r\n//          error : (error) => {\r\n//             console.error('API Error:', error);\r\n//           },\r\n//         });\r\n//       };\r\n//       reader.readAsArrayBuffer(this.selectedImage);\r\n//     }\r\n//   }\r\n// }\r\n\r\n//////////////////////////////////////////////////\r\n//this code is for 1st-select img,then compressed it,then upload or send it to service for http post.\r\n// Import necessary modules and services\r\n// Import necessary modules and services\r\n// import { Component } from '@angular/core';\r\n// import { ImageScannerApiService } from './image-scanner-api.service';\r\n// import { NgxImageCompressService } from 'ngx-image-compress';\r\n\r\n// @Component({\r\n//   selector: 'app-root',\r\n//   templateUrl: './app.component.html'\r\n// })\r\n// export class AppComponent {\r\n//   title = 'app';\r\n//   selectedImage: File | null = null;\r\n\r\n//   constructor(\r\n//     private imgScannerApi: ImageScannerApiService,\r\n//     private imageCompress: NgxImageCompressService\r\n//   ) {}\r\n\r\n//   onFileSelected(event: any) {\r\n//     const files = event.target.files;\r\n//     this.selectedImage = files && files.length > 0 ? files[0] : null;\r\n\r\n//     if (this.selectedImage) {\r\n//       const originalSizeInBytes = this.selectedImage.size;\r\n//       const originalSizeInKB = originalSizeInBytes / 1024;\r\n//       console.log('Original Image Size:', originalSizeInKB.toFixed(2), 'KB');\r\n\r\n//       this.compressAndUpload();\r\n//     }\r\n//   }\r\n\r\n//   compressAndUpload(): void {\r\n//     if (this.selectedImage) {\r\n//       const reader = new FileReader();\r\n//       reader.onload = () => {\r\n//         const base64String = reader.result as string;\r\n//         this.imageCompress\r\n//           .compressFile(base64String, -1, 60, 60)\r\n//           .then((compressedBase64: string) => {\r\n//             // Now you can use compressedBase64 as a base64 string\r\n//             const compressedSizeInBytes = compressedBase64.length;\r\n//            // console.log('Compressed Image Size:', compressedSizeInBytes);\r\n//             const compressedSizeInKB = compressedSizeInBytes / 1024;\r\n//             console.log('Compressed Image Size:', compressedSizeInKB.toFixed(2), 'KB');\r\n  \r\n//             // Call your API service here to send the compressed image\r\n//             this.imgScannerApi.sendData(compressedBase64.split(',')[1]).subscribe({\r\n//               next: (response) => {\r\n//                 console.log('API Response:', response);\r\n//               },\r\n//               error: (error) => {\r\n//                 console.error('API Error:', error);\r\n//               },\r\n//             });\r\n//           })\r\n//           .catch((error) => {\r\n//             console.error('Image Compression Error:', error);\r\n//           });\r\n//       };\r\n//       reader.readAsDataURL(this.selectedImage);\r\n//     }\r\n//   }\r\n  \r\n// }\r\n\r\n///////////////////////////////\r\n// ... (your imports and component decorator)\r\n\r\nexport class AppComponent {\r\n  // ... (your existing code)\r\n\r\n  onFileSelected(event: any) {\r\n    const files = event.target.files;\r\n    this.selectedImage = files && files.length > 0 ? files[0] : null;\r\n\r\n    if (this.selectedImage) {\r\n      const originalSizeInBytes = this.selectedImage.size;\r\n      const originalSizeInKB = originalSizeInBytes / 1024;\r\n      console.log('Original Image Size:', originalSizeInKB.toFixed(2), 'KB');\r\n    }\r\n  }\r\n\r\n  compressAndUpload(): void {\r\n    if (this.selectedImage) {\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        const base64String = reader.result as string;\r\n        this.imageCompress\r\n          .compressFile(base64String, -1, 60, 60)\r\n          .then((compressedBase64: string) => {\r\n            const compressedSizeInBytes = compressedBase64.length;\r\n            const compressedSizeInKB = compressedSizeInBytes / 1024;\r\n            console.log('Compressed Image Size:', compressedSizeInKB.toFixed(2), 'KB');\r\n\r\n            // Assign the compressedBase64 to a class variable\r\n            this.compressedBase64 = compressedBase64;\r\n          })\r\n          .catch((error) => {\r\n            console.error('Image Compression Error:', error);\r\n          });\r\n      };\r\n      reader.readAsDataURL(this.selectedImage);\r\n    }\r\n  }\r\n\r\n  // Add a new method to handle the button click\r\n  onClickUpload(): void {\r\n    // Now, you can use this.compressedBase64 to send the data to the API\r\n    if (this.compressedBase64) {\r\n      this.imgScannerApi.sendData(this.compressedBase64.split(',')[1]).subscribe({\r\n        next: (response) => {\r\n          console.log('API Response:', response);\r\n        },\r\n        error: (error) => {\r\n          console.error('API Error:', error);\r\n        },\r\n      });\r\n    }\r\n  }\r\n  \r\n  // Define a class variable to store the compressedBase64 string\r\n  compressedBase64: string | null = null;\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}